# RHEL 6 specific configuration tasks
# Included via spec_config from data/config.yml
---

# RHEL 6 specific tasks
- name: Set hostname (RHEL 6)
  lineinfile:
    path: /etc/sysconfig/network
    regexp: '^HOSTNAME='
    line: 'HOSTNAME={{ fqdn | default(ansible_hostname) }}'

- name: Update /etc/hosts for hostname
  lineinfile:
    path: /etc/hosts
    regexp: '^127\.0\.1\.1'
    line: '127.0.1.1 {{ fqdn | default(ansible_hostname) }} {{ ansible_hostname }}'

- name: Ensure SSH is enabled at boot (RHEL 6)
  service:
    name: sshd
    enabled: yes
    state: started

- name: Configure network interface (RHEL 6)
  template:
    src: ifcfg-eth0.j2
    dest: /etc/sysconfig/network-scripts/ifcfg-eth0
  when:
    - ip is defined and ip != ""
  notify: restart network

- name: Update all packages (RHEL 6)
  yum:
    name: '*'
    state: latest

- name: Install common packages (RHEL 6)
  yum:
    name:
      - wget
      - curl
      - vim
      - nano
      - net-tools
    state: present
